(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-after_sale-index"],{"2e3d":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"cell-group margin-cell-group cell-header"},[t._v("请选择退货商品和数量")]),e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){i=t.$handleEvent(i),t.submit(i)}}},[e("v-uni-view",{staticClass:"content-top"},[e("v-uni-view",{staticClass:"img-list cart-list"},[e("v-uni-checkbox-group",{staticClass:"cart-checkbox",on:{change:function(i){i=t.$handleEvent(i),t.checkboxChange(i)}}},t._l(t.items,function(i,a){return e("v-uni-view",{key:a,staticClass:"cart-checkbox-item"},[e("v-uni-label",{staticClass:"uni-list-cell uni-list-cell-pd"},[e("v-uni-view",{staticClass:"cart-checkbox-c"},[e("v-uni-checkbox",{attrs:{value:i.id,checked:i.checked,color:"#FF7159"}})],1),e("v-uni-view",{staticClass:"img-list-item"},[e("v-uni-image",{staticClass:"img-list-item-l little-img have-none",attrs:{src:i.image_url,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"img-list-item-r little-right"},[e("v-uni-view",{staticClass:"little-right-t"},[e("v-uni-view",{staticClass:"goods-name list-goods-name"},[t._v(t._s(i.name))])],1),i.addon?e("v-uni-view",{staticClass:"goods-item-c"},[e("v-uni-view",{staticClass:"goods-buy"},[e("v-uni-view",{staticClass:"goods-salesvolume mr5"},[t._v(t._s(i.addon))])],1)],1):t._e(),e("v-uni-view",{staticClass:"goods-item-c"},[e("v-uni-view",{staticClass:"goods-buy"},[e("v-uni-view",{staticClass:"goods-salesvolume mr5"},[t._v("购买数:"+t._s(i.nums))]),e("v-uni-view",{staticClass:"goods-salesvolume mr5"},[t._v("发货数量:"+t._s(i.sendnums))]),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0!=i.reship_nums,expression:"item.reship_nums!=0"}],staticClass:"goods-salesvolume mr5"},[t._v("已退数量:"+t._s(i.reship_nums))]),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.returnStatus,expression:"item.returnStatus"}],staticClass:"goods-salesvolume"},[e("v-uni-label",[t._v("可退数：")]),e("v-uni-input",{ref:"input",refInFor:!0,staticClass:"inputStyle",attrs:{type:"text"},on:{click:function(i){i.stopPropagation(),i=t.$handleEvent(i)}},model:{value:i.returnNums,callback:function(e){t.$set(i,"returnNums",e)},expression:"item.returnNums"}})],1)],1)],1)],1)],1)],1)],1)}),1)],1),e("v-uni-view",{staticClass:"cell-group margin-cell-group"},[e("v-uni-view",{staticClass:"cell-item"},[e("v-uni-view",{staticClass:"cell-item-hd"},[e("v-uni-view",{staticClass:"cell-hd-title"},[t._v("是否收到商品")])],1),e("v-uni-view",{staticClass:"cell-item-ft"},[e("v-uni-view",{staticClass:"uni-form-item uni-column invoice-type"},[e("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(i){i=t.$handleEvent(i),t.radioChange(i)}}},t._l(t.type_list,function(i,a){return e("v-uni-label",{key:a,staticClass:"uni-list-cell uni-list-cell-pd"},[e("v-uni-view",{staticClass:"invoice-type-icon"},[e("v-uni-radio",{staticClass:"a-radio",attrs:{id:i.name,value:i.value,checked:i.checked,disabled:i.disabled}})],1),e("v-uni-view",{staticClass:"invoice-type-c"},[e("v-uni-label",{staticClass:"label-2-text",attrs:{for:i.name}},[e("v-uni-text",[t._v(t._s(i.name))])],1)],1)],1)}),1)],1)],1)],1),e("v-uni-view",{staticClass:"cell-item"},[e("v-uni-view",{staticClass:"cell-item-hd"},[e("v-uni-view",{staticClass:"cell-hd-title"},[t._v("退款金额")])],1),e("v-uni-view",{staticClass:"cell-item-ft"},[e("v-uni-input",{staticClass:"cell-bd-input red-price",model:{value:t.refund,callback:function(i){t.refund=i},expression:"refund"}})],1)],1)],1),e("v-uni-view",{staticClass:"cell-group margin-cell-group"},[e("v-uni-view",{staticClass:"cell-item right-img"},[e("v-uni-view",{staticClass:"cell-item-hd"},[e("v-uni-view",{staticClass:"cell-hd-title"},[t._v("上传凭证")])],1)],1),e("v-uni-view",{},[e("v-uni-view",{staticClass:"evaluate-c-b"},[t._l(t.images,function(i,a){return e("v-uni-view",{key:a,staticClass:"goods-img-item"},[e("v-uni-image",{staticClass:"del",attrs:{src:"/static/image/del.png",mode:""},on:{click:function(e){e=t.$handleEvent(e),t.delImage(i)}}}),e("v-uni-image",{attrs:{src:i.url,mode:""},on:{click:function(e){e=t.$handleEvent(e),t.clickImg(i.url)}}})],1)}),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isImage,expression:"isImage"}],staticClass:"upload-img",on:{click:function(i){i=t.$handleEvent(i),t.upImage(i)}}},[e("v-uni-image",{staticClass:"icon",attrs:{src:"/static/image/camera.png",mode:""}}),e("v-uni-view",{},[t._v("上传照片")])],1)],2)],1)],1),e("v-uni-view",{staticClass:"cell-group margin-cell-group"},[e("v-uni-view",{staticClass:"cell-item right-img"},[e("v-uni-view",{staticClass:"cell-item-hd"},[e("v-uni-view",{staticClass:"cell-hd-title"},[t._v("问题描述")])],1)],1),e("v-uni-view",{staticClass:"cell-textarea "},[e("v-uni-textarea",{attrs:{placeholder:"请您在此描述问题(最多200字)",maxlength:"200"},model:{value:t.reason,callback:function(i){t.reason=i},expression:"reason"}})],1)],1)],1),e("v-uni-view",{staticClass:"button-bottom"},[e("v-uni-button",{staticClass:"btn btn-b btn-square",attrs:{formType:"submit",disabled:t.submitStatus,loading:t.submitStatus}},[t._v("提交")])],1)],1)],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},"4dc7":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("ac6a");var a={data:function(){return{type_list:[{value:"1",name:"仅退款",checked:!0,disabled:!1},{value:"2",name:"退货退款",checked:!1,disabled:!1}]}},methods:{radioChange:function(t){var i=this;this.type_list.forEach(function(e){e.value===t.target.value?(e.checked=!0,i.aftersale_type=t.target.value):e.checked=!1}),this.type_list[0].checked?this.refund_input_noedit=!0:this.refund_input_noedit=!1}}};i.default=a},"51db":function(t,i,e){var a=e("b25c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("2e71a55c",a,!0,{sourceMap:!1,shadowMode:!1})},5292:function(t,i,e){"use strict";e.r(i);var a=e("b633"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);i["default"]=s.a},6190:function(t,i,e){"use strict";e.r(i);var a=e("4dc7"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);i["default"]=s.a},"7fb7":function(t,i,e){"use strict";var a=e("51db"),s=e.n(a);s.a},a194:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(i){i=t.$handleEvent(i),t.radioChange(i)}}},t._l(t.type_list,function(i,a){return e("v-uni-label",{key:a,staticClass:"uni-list-cell uni-list-cell-pd"},[e("v-uni-view",{staticClass:"invoice-type-icon"},[e("v-uni-radio",{staticClass:"a-radio",attrs:{id:i.name,value:i.value,checked:i.checked,disabled:i.disabled}})],1),e("v-uni-view",{staticClass:"invoice-type-c"},[e("v-uni-label",{staticClass:"label-2-text",attrs:{for:i.name}},[e("v-uni-text",[t._v(t._s(i.name))])],1)],1)],1)}),1)],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},b25c:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".list-goods-name[data-v-76b21103]{font-size:%?26?%;width:100%!important}.cart-checkbox-item[data-v-76b21103]{position:relative}.invoice-type .uni-list-cell[data-v-76b21103]{display:inline-block;font-size:%?26?%;color:#333;position:relative;margin-left:%?50?%}.invoice-type .uni-list-cell>uni-view[data-v-76b21103]{display:inline-block}.invoice-type-icon[data-v-76b21103]{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.invoice-type-c[data-v-76b21103]{margin-left:%?50?%;line-height:2}.cell-item-ft .cell-bd-input[data-v-76b21103]{text-align:right;width:%?500?%;font-size:%?28?%}.right-img[data-v-76b21103]{border-bottom:0}.cell-textarea[data-v-76b21103]{padding:0 %?26?% %?20?%}.cell-textarea uni-textarea[data-v-76b21103]{width:100%;height:%?200?%;font-size:%?26?%;color:#333}.evaluate-c-b[data-v-76b21103]{overflow:hidden;padding:0 %?20?%}.upload-img[data-v-76b21103]{width:%?146?%;height:%?146?%;margin:%?14?%;text-align:center;color:#999;font-size:%?22?%;border:%?2?% solid #e1e1e1;border-radius:%?4?%;display:inline-block;float:left;padding:%?24?% 0}.goods-img-item[data-v-76b21103]{width:%?174?%;height:%?174?%;padding:%?14?%;float:left;position:relative}.goods-img-item[data-v-76b21103]:nth-child(4n){margin-right:0}.goods-img-item uni-image[data-v-76b21103]{width:100%;height:100%}.del[data-v-76b21103]{width:%?30?%!important;height:%?30?%!important;position:absolute;right:0;top:0;z-index:999}.cell-header[data-v-76b21103]{padding:10rpxpx 0;margin:0;margin-left:%?20?%;font-size:%?28?%;font-weight:550}.mr5[data-v-76b21103]{margin-right:%?10?%}.inputStyle[data-v-76b21103]{display:inline-block;border:%?2?% solid #ccc;height:%?30?%;line-height:%?30?%;width:%?60?%;text-align:center;font-size:%?24?%;vertical-align:middle;margin-bottom:%?8?%}\r\n",""])},b633:function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("28a5"),e("6b54"),e("87b3"),e("ac6a");var s=a(e("ef70")),n={data:function(){return{type_list:[{value:"1",name:"未收到",checked:!0,disabled:!1},{value:"2",name:"已收到",checked:!1,disabled:!1}],order_id:"",items:[],item_ids:[],aftersale_type:1,refund:0,refund_show:0,images:[],reason:"",image_max:5,refund_input_noedit:!0,mode:"aspectFill",submitStatus:!1}},components:{jhlable:s.default},computed:{isImage:function(){var t=this.image_max-this.images.length;return t>0}},methods:{radioChange:function(t){var i=this;this.type_list.forEach(function(e){e.value===t.target.value?(e.checked=!0,i.aftersale_type=t.target.value):e.checked=!1}),this.type_list[0].checked?this.refund_input_noedit=!0:this.refund_input_noedit=!1},getOrderInfo:function(){var t=this,i={order_id:this.order_id};this.$api.orderDetail(i,function(i){if(i.status)if(1!=i.data.text_status&&6!=i.data.text_status&&7!=i.data.text_status){var e=t.type_list;2==i.data.text_status&&(e[1].disabled=!0);for(var a,s={},n=0;n<i.data.items.length;n++)i.data.items[n].nums>i.data.items[n].reship_nums&&(s=i.data.items[n].nums-i.data.items[n].reship_nums),s>0&&(a=!0),i.data.items[n].id=i.data.items[n].id.toString(),t.item_ids=t.item_ids.concat({id:i.data.items[n].id,nums:s}),i.data.items[n].returnNums=s,i.data.items[n].returnStatus=a;t.items=i.data.items,t.refund=i.data.order_amount-i.data.refunded,t.refund_show=i.data.payed-i.data.refunded,t.type_list=e}else t.$common.errorToBack("订单不可以进行售后");else t.$common.errorToBack("没有找到此订单")})},checkboxChange:function(t){var i=0;this.item_ids=[];for(var e=0;e<t.detail.value.length;e++)for(var a=t.detail.value[e],s=0;s<this.items.length;s++)this.items[s].id==a&&this.items[s].nums>this.items[s].reship_nums&&(i=this.$refs.input[e].value,this.item_ids=this.item_ids.concat({id:a,nums:i}))},submit:function(t){var i=this;this.submitStatus=!0;for(var e=[],a=0;a<this.images.length;a++)e=e.concat(this.images[a].image_id);var s=/^[0-9]+(.[0-9]{1,2})?$/;if(!s.test(this.refund))return this.$common.errorToShow("请输入正确金额"),this.submitStatus=!1,!1;if(this.refund>this.refund_show)return this.$common.errorToShow("退款金额过大"),this.submitStatus=!1,!1;var n={order_id:this.order_id,type:this.aftersale_type,items:this.item_ids,images:e,refund:this.refund,reason:this.reason};this.$api.addAfterSales(n,function(t){t.status?i.$common.successToShow("提交成功",function(t){uni.navigateBack({delta:1})}):i.$common.errorToShow(t.msg)},function(t){i.submitStatus=!1})},upImage:function(){var t=this,i=this.image_max-this.images.length;i>0&&this.$api.uploadImage(i,function(i){i.status?(t.images.push(i.data),t.$common.successToShow(i.msg)):t.$common.errorToShow(i.msg)})},delImage:function(t){for(var i=[],e=0;e<this.images.length;e++)this.images[e].image_id!=t.image_id&&i.push(this.images[e]);this.images=i},clickImg:function(t){uni.previewImage({urls:t.split()})}},onLoad:function(t){this.order_id=t.order_id,this.getOrderInfo()}};i.default=n},ef70:function(t,i,e){"use strict";e.r(i);var a=e("a194"),s=e("6190");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);var l=e("2877"),u=Object(l["a"])(s["default"],a["a"],a["b"],!1,null,"3411b31c",null);i["default"]=u.exports},f1da:function(t,i,e){"use strict";e.r(i);var a=e("2e3d"),s=e("5292");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);e("7fb7");var l=e("2877"),u=Object(l["a"])(s["default"],a["a"],a["b"],!1,null,"76b21103",null);i["default"]=u.exports}}]);