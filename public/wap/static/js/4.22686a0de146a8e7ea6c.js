webpackJsonp([4],{"5wbS":function(t,e){},"8rYr":function(t,e){},AJWU:function(t,e){},aH4g:function(t,e){t.exports="data:image/png;base64,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"},aT31:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("NYxO");var o={data:function(){return{openWindow:!1,shipList:[]}},props:{ship:{type:[Array,Object],default:function(){return[]}}},methods:{showHandler:function(){var t=this;this.openWindow=!0,this.$api.userShip({},function(e){t.shipList=e.data})},shipHandler:function(t){this.openWindow=!1,this.$emit("shipHandler",this.shipList[t])},newShipAdd:function(){this.$router.push({path:"/address"})}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[Object.keys(t.ship).length?o("div",{staticClass:"orderadd"},[o("img",{staticClass:"orderadd-gps",attrs:{src:s("aH4g")}}),t._v(" "),o("div",{staticClass:"orderadd-content",on:{click:t.showHandler}},[o("div",{staticClass:"orderadd-top"},[o("span",[t._v("收货人："+t._s(t.ship.name))]),t._v(" "),o("p",[t._v(t._s(t.ship.mobile))])]),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("收货地址："+t._s(t.ship.area_name)+t._s(t.ship.address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")}})])])]):o("div",{staticClass:"orderadd"},[o("yd-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.newShipAdd(e)}}},[t._v("新增收货地址")])],1),t._v(" "),o("yd-popup",{attrs:{position:"bottom",width:"20%",height:"60%"},model:{value:t.openWindow,callback:function(e){t.openWindow=e},expression:"openWindow"}},[o("div",{staticClass:"orderadd-content"},[t.shipList.length?o("div",t._l(t.shipList,function(e,i){return o("div",{key:i,staticStyle:{"margin-top":"20px","text-align":"left"},on:{click:function(e){t.shipHandler(i)}}},[o("div",{staticClass:"orderadd-top"},[1===e.is_def?o("yd-badge",{attrs:{type:"primary"}},[t._v("默认")]):t._e(),t._v(" "),o("span",[t._v("收货人："+t._s(e.name))]),t._v(" "),o("p",[t._v(t._s(e.mobile))])],1),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("收货地址："+t._s(e.area_name)+t._s(e.address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")},nativeOn:{click:function(e){return t.showAdd(e)}}})])])})):t._e(),t._v(" "),o("yd-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.newShipAdd(e)}}},[t._v("新增收货地址")])],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(o,i,!1,function(t){s("wAAE")},null,null).exports,r={props:{products:{type:[Array,Object],default:function(){return[]}}},methods:{showDetail:function(t){this.$router.push({path:"/goodsdetail",query:{goods_id:t}})}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderlist"},[s("yd-list",{attrs:{theme:"4"}},t._l(t.products,function(e,o){return s("yd-list-item",{key:o,nativeOn:{click:function(s){t.showDetail(e.products.goods_id)}}},[s("img",{attrs:{slot:"img",src:e.products.image_path},slot:"img"}),t._v(" "),s("h3",{staticClass:"goodsname",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.products.name))]),t._v(" "),s("p",{staticClass:"goods",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.products.spes_desc))]),t._v(" "),s("yd-list-other",{attrs:{slot:"other"},slot:"other"},[s("div",[s("span",{staticClass:"demo-list-price"},[s("em",[t._v("¥")]),t._v(t._s(e.products.price))])]),t._v(" "),s("div",[t._v("x"+t._s(e.nums))])]),t._v(" "),s("yd-list-other",{attrs:{slot:"other"},slot:"other"},[e.products.promotion_list?s("div",t._l(e.products.promotion_list,function(e,o){return s("div",{key:o},[e.type?s("yd-badge",{attrs:{shape:"square",type:"danger"}},[t._v(t._s(e.name))]):t._e()],1)})):t._e()])],1)}))],1)},staticRenderFns:[]};var c=s("VU/8")(r,a,!1,function(t){s("5wbS")},null,null).exports,d=s("pLot"),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-cell-group",[s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("买家留言：")]),t._v(" "),s("yd-input",{attrs:{slot:"right",required:"","show-success-icon":!1,"show-error-icon":!1,max:"50",placeholder:"50字以内（选填）"},slot:"right",model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1)},staticRenderFns:[]};var l=s("VU/8")({data:function(){return{input:""}},watch:{input:function(){this.$emit("msg",this.input)}}},p,!1,function(t){s("oszA")},null,null).exports,u={props:{amount:[Number,String],require:!0},methods:{pay:function(){this.$emit("payment")}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderfooter"},[s("div",{staticClass:"orderfooter-left"},[s("p",[t._v("需付：")]),s("span",[t._v("￥"+t._s(this.GLOBAL.formatMoney(t.amount,2,"")))])]),t._v(" "),s("div",{staticClass:"orderfooter-right"},[s("yd-button",{attrs:{type:"danger"},nativeOn:{click:function(e){return t.pay(e)}}},[t._v("立即支付")])],1)])},staticRenderFns:[]},m=s("VU/8")(u,h,!1,null,null,null).exports,_={data:function(){return{key:"",openWindow:!1,openStore:!1,shipList:[],storeList:[]}},props:{storeTab:{type:Number,default:function(){return 0}},ship:{type:[Array,Object],default:function(){return[]}},store:{type:[Array,Object],default:function(){return[]}}},methods:{showHandler:function(){var t=this;this.openWindow=!0,this.$api.userShip({},function(e){t.shipList=e.data})},shipHandler:function(t){this.openWindow=!1,this.$emit("shipHandler",this.shipList[t])},storeHandler:function(t){this.openStore=!1,this.$emit("storeHandler",this.storeList[t])},newShipAdd:function(){this.$router.push({path:"/address"})},storeClick:function(t){this.$emit("storeTab",t)},showStoreList:function(){this.openStore=!0,this.getStoreList()},getStoreList:function(){var t=this,e={key:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""};this.$api.storeList(e,function(e){e.status&&(t.storeList=e.data)})},submitHandler:function(){this.getStoreList(this.key)}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("yd-tab",{attrs:{"prevent-default":!1,"item-click":t.storeClick},model:{value:t.storeTab,callback:function(e){t.storeTab=e},expression:"storeTab"}},[o("yd-tab-panel",{attrs:{label:"快递配送"}},[Object.keys(t.ship).length?o("div",{staticClass:"orderadd"},[o("img",{staticClass:"orderadd-gps",attrs:{src:s("aH4g")}}),t._v(" "),o("div",{staticClass:"orderadd-content",on:{click:t.showHandler}},[o("div",{staticClass:"orderadd-top"},[o("span",[t._v("收货人："+t._s(t.ship.name))]),t._v(" "),o("p",[t._v(t._s(t.ship.mobile))])]),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("收货地址："+t._s(t.ship.area_name)+t._s(t.ship.address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")}})])])]):o("div",{staticClass:"orderadd"},[o("yd-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.newShipAdd(e)}}},[t._v("新增收货地址")])],1)]),t._v(" "),o("yd-tab-panel",{attrs:{label:"门店自提"}},[t.store?o("div",{staticClass:"orderadd"},[o("img",{staticClass:"orderadd-gps",attrs:{src:s("aH4g")}}),t._v(" "),o("div",{staticClass:"orderadd-content",on:{click:t.showStoreList}},[o("div",{staticClass:"orderadd-top"},[o("span",[t._v("联系人："+t._s(t.store.linkman))]),t._v(" "),o("p",[t._v(t._s(t.store.mobile))])]),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("门店名称："+t._s(t.store.store_name))]),t._v(" "),o("p",[t._v("门店地址："+t._s(t.store.all_address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")}})])])]):o("div",[o("span",[t._v("暂无门店信息")])])])],1),t._v(" "),o("yd-popup",{attrs:{position:"bottom",width:"20%",height:"60%"},model:{value:t.openWindow,callback:function(e){t.openWindow=e},expression:"openWindow"}},[o("div",{staticClass:"orderadd-content"},[t.shipList.length?o("div",t._l(t.shipList,function(e,i){return o("div",{key:i,staticStyle:{"margin-top":"20px","text-align":"left"},on:{click:function(e){t.shipHandler(i)}}},[o("div",{staticClass:"orderadd-top"},[1===e.is_def?o("yd-badge",{attrs:{type:"primary"}},[t._v("默认")]):t._e(),t._v(" "),o("span",[t._v("收货人："+t._s(e.name))]),t._v(" "),o("p",[t._v(t._s(e.mobile))])],1),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("收货地址："+t._s(e.area_name)+t._s(e.address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")},nativeOn:{click:function(e){return t.showAdd(e)}}})])])})):t._e(),t._v(" "),o("yd-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.newShipAdd(e)}}},[t._v("新增收货地址")])],1)]),t._v(" "),o("yd-popup",{attrs:{position:"bottom",width:"20%",height:"60%"},model:{value:t.openStore,callback:function(e){t.openStore=e},expression:"openStore"}},[o("div",{staticClass:"orderadd-content"},[o("div",{staticClass:"search-input"},[o("i",{staticClass:"search-icon"}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],attrs:{type:"text",placeholder:"搜索门店"},domProps:{value:t.key},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitHandler(e):null},input:function(e){e.target.composing||(t.key=e.target.value)}}})]),t._v(" "),t.storeList.length?o("div",t._l(t.storeList,function(e,i){return o("div",{key:i,staticStyle:{"margin-top":"20px","text-align":"left"},on:{click:function(e){t.storeHandler(i)}}},[o("div",{staticClass:"orderadd-top"},[o("span",[t._v("联系人："+t._s(e.linkman))]),t._v(" "),o("p",[t._v(t._s(e.mobile))])]),t._v(" "),o("div",{staticClass:"orderadd-bottom"},[o("p",[t._v("门店名称："+t._s(e.store_name))]),t._v(" "),o("p",[t._v("门店地址："+t._s(e.all_address))]),t._v(" "),o("img",{staticClass:"orderadd-right right-img",attrs:{src:s("oenc")}})])])})):t._e()])])],1)},staticRenderFns:[]};var f=s("VU/8")(_,v,!1,function(t){s("8rYr")},null,null).exports,g={components:{orderadd:n,orderlist:c,ordercell:d.a,orderinput:l,orderfooter:m,openstore:f},data:function(){return{cartIds:this.$route.query.cartIds?this.$route.query.cartIds:"",products:[],goods_amount:"",amount:"",goods_pmt:"",order_pmt:"",cost_freight:"",coupon_pmt:"",msg:"",couponShow:!1,usedCouponName:"未使用",usedCouponCode:"",entryCouponCode:"",couponPopTab:0,userCoupon:[],couponCheck:["static/image/kong.png","static/image/xuanzhong.png"],params:{ids:"",area_id:0,coupon_code:"",point:0},storeTab:0,shipInfo:"",storeInfo:"",openStore:!1,ladingName:"",ladingMobile:"",point_open:!1,point_sum:0,usable_point:0,point_money:0,use_point:!1,receiptType:1}},mounted:function(){this.params.ids=this.cartIds,this.isOpenStore(),this.userDefaultShip(),this.orderUsablePoint()},methods:{isOpenStore:function(){var t=this;this.$api.switchStore({},function(e){e.status&&(1===e.data?t.openStore=!0:t.openStore=!1),t.openStore&&t.$api.defaultStore({},function(e){e.status&&(t.storeInfo=e.data)})})},selectStoreTab:function(t){this.storeTab=t,1===this.storeTab?this.params.area_id=this.storeInfo.area_id:this.params.area_id=this.shipInfo.area_id},userDefaultShip:function(){var t=this;this.$api.userDefaultShip({},function(e){e.status&&e.data&&(t.shipInfo=e.data,t.params.area_id=e.data.area_id)})},getCartList:function(){var t=this;if(!this.cartIds)return this.$dialog.alert({mes:"请选择要购买的商品",callback:function(){t.$router.go(-1)}}),!1;this.$api.cartList(this.params,function(e){if(e.status){var s=e.data.list,o=e.data;if(t.products=s,t.goods_amount=o.goods_amount,t.amount=o.amount,t.cost_freight=o.cost_freight,t.goods_pmt=o.goods_pmt,t.order_pmt=o.order_pmt,t.coupon_pmt=o.coupon_pmt,t.use_point||t.orderUsablePoint(t.amount),o.coupon){for(var i in o.coupon)t.usedCouponName=o.coupon[i],t.usedCouponCode=i;t.couponShow=!1}}else 15009===e.data&&setTimeout(function(){t.entryCouponCode=""},1500)})},orderUsablePoint:function(t){var e=this;this.$api.usablePoint({order_money:t},function(t){t.status&&(1===t.switch&&(e.point_open=!0),e.point_sum=t.data,e.usable_point=t.available_point,e.point_money=t.point_rmb)})},shipHandler:function(t){this.shipInfo=t,this.params.area_id=t.area_id},storeHandler:function(t){this.storeInfo=t,this.params.area_id=t.area_id},sendMsg:function(t){this.msg=t},payment:function(){var t=this,e={cart_ids:this.cartIds,memo:this.msg,coupon_code:this.selectCoupon?this.selectCoupon.coupon_code:"",point:this.use_point?this.usable_point:""};0===this.storeTab?(e.uship_id=this.$store.state.shipInfo.id,e.area_id=this.$store.state.shipInfo.area_id,e.receipt_type=1):(e.receipt_type=2,e.store_id=this.$store.state.storeInfo.id,e.area_id=this.$store.state.storeInfo.area_id,e.lading_name=this.ladingName,e.lading_mobile=this.ladingMobile),this.$api.createOrder(e,function(e){t.$router.replace({path:"/cashierdesk",query:{order_id:e.data.order_id}})})},tackName:function(t){this.ladingName=t},tackMobile:function(t){this.ladingMobile=t},receipt:function(t){this.receiptType=t,1===this.receiptType?this.params.area_id=this.userShip.area_id:this.params.area_id="",console.log(this.receiptType)},showCouponHandler:function(){this.couponShow=!0,0===this.couponPopTab&&this.getCouponList()},getCouponList:function(){var t=this;this.$api.userCoupon({},function(e){e.status&&(t.userCoupon=e.data,t.userCoupon.forEach(function(e){t.usedCouponCode&&t.usedCouponCode===e.coupon_code?t.$set(e,"checked",!0):t.$set(e,"checked",!1)}))})},couponPopClickHandler:function(t){this.couponPopTab=t},receiveCoupon:function(){this.entryCouponCode?this.params.coupon_code=this.entryCouponCode:this.$dialog.toast({mes:"请输入优惠券码",timeout:1300})},couponChecked:function(t,e){!1===e?(this.userCoupon.forEach(function(t){t.checked&&(t.checked=!1)}),this.usedCouponCode=this.userCoupon[t].coupon_code,this.usedCouponName=this.userCoupon[t].name,this.userCoupon[t].checked=!0,this.use_point=!1,this.$refs.mychild.checked=status,this.params.point=0,this.params.coupon_code=this.usedCouponCode):(this.usedCouponCode="",this.userCoupon[t].checked=!1,this.usedCouponName="未使用",this.params.coupon_code="")},isUsePoint:function(t){this.use_point=t}},watch:{params:{handler:function(){this.getCartList()},deep:!0},use_point:function(){this.use_point?this.params.point=this.usable_point:this.params.point=0},storeTab:function(){console.log(this.storeTab),console.log(this.shipInfo),console.log(this.storeInfo)}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"firmorder"},[t.openStore?s("openstore",{attrs:{storeTab:t.storeTab,store:t.storeInfo,ship:t.shipInfo},on:{storeTab:t.selectStoreTab,name:t.tackName,mobile:t.tackMobile,shipHandler:t.shipHandler,storeHandler:t.storeHandler}}):s("orderadd",{attrs:{ship:t.shipInfo},on:{shipHandler:t.shipHandler}}),t._v(" "),s("orderlist",{attrs:{products:t.products}}),t._v(" "),s("div",{staticClass:"ordercoupon"},[s("yd-cell-item",{nativeOn:{click:function(e){return t.showCouponHandler(e)}}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("优惠券")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.usedCouponName))])]),t._v(" "),s("yd-popup",{staticClass:"ordercoupon-content",attrs:{position:"bottom",height:"40%"},model:{value:t.couponShow,callback:function(e){t.couponShow=e},expression:"couponShow"}},[s("yd-tab",{attrs:{"prevent-default":!1,"item-click":t.couponPopClickHandler},model:{value:t.couponPopTab,callback:function(e){t.couponPopTab=e},expression:"couponPopTab"}},[s("yd-tab-panel",{attrs:{label:"已领取优惠券"}},[s("yd-cell-group",[t.userCoupon.length?s("div",t._l(t.userCoupon,function(e,o){return s("yd-cell-item",{key:o,nativeOn:{click:function(s){t.couponChecked(o,e.checked)}}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!item.checked"}],attrs:{src:t.couponCheck[0]}}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"item.checked"}],attrs:{src:t.couponCheck[1]}})])])})):s("div",[t._v("\n                            没有优惠券 快去领取一个吧\n                        ")])])],1),t._v(" "),s("yd-tab-panel",{attrs:{label:"输入优惠券号码"}},[s("div",{staticClass:"coupon-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.entryCouponCode,expression:"entryCouponCode"}],attrs:{type:"text",placeholder:"请输入优惠券号码"},domProps:{value:t.entryCouponCode},on:{input:function(e){e.target.composing||(t.entryCouponCode=e.target.value)}}}),t._v(" "),s("button",{attrs:{type:"button"},on:{"&click":function(e){return t.receiveCoupon(e)}}},[t._v("确定")])])])],1),t._v(" "),s("yd-button",{staticStyle:{margin:"30px"},attrs:{type:"warning"},nativeOn:{click:function(e){t.couponShow=!1}}},[t._v("关闭")])],1)],1),t._v(" "),s("ordercell",{ref:"mychild",attrs:{goods_amount:t.goods_amount,amount:t.amount,cost_freight:t.cost_freight,goods_pmt:t.goods_pmt,order_pmt:t.order_pmt,coupon_pmt:t.coupon_pmt,open_point:t.point_open,use_point:t.use_point,point_sum:t.point_sum,usable_point:t.usable_point,point_money:t.point_money},on:{isUsePoint:t.isUsePoint}}),t._v(" "),s("orderinput",{on:{msg:t.sendMsg}}),t._v(" "),s("orderfooter",{attrs:{amount:t.amount},on:{payment:t.payment}})],1)},staticRenderFns:[]};var b=s("VU/8")(g,y,!1,function(t){s("gPCg")},null,null);e.default=b.exports},gPCg:function(t,e){},oszA:function(t,e){},pLot:function(t,e,s){"use strict";var o={props:{goods_amount:{type:[Number,String],require:!0},cost_freight:{type:[Number,String],require:!0},amount:{type:[Number,String],require:!0},goods_pmt:{type:[Number,String],require:!0},order_pmt:{type:[Number,String],require:!0},coupon_pmt:{type:[Number,String],require:!1},point_pmt:{type:String,default:function(){return""}},open_point:{type:Boolean,default:function(){return!1}},point_sum:{type:Number,default:function(){return 0}},usable_point:{type:Number,default:function(){return 0}},point_money:{type:Number,default:function(){return 0}},use_point:{type:Boolean,default:function(){return!1}}},data:function(){return{checked:!1}},watch:{checked:function(){this.$emit("isUsePoint",this.checked)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ordercell"},[s("div",{staticClass:"orderscore"},[t.open_point&&t.usable_point?s("yd-cell-item",{attrs:{type:"checkbox"}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("积分抵扣")]),t._v(" "),s("span",{attrs:{slot:"right"},slot:"right"},[t._v("可用"+t._s(t.usable_point)+"积分 抵扣￥"+t._s(this.GLOBAL.formatMoney(t.point_money,2,""))+" ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{slot:"right",type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var s=t.checked,o=e.target,i=!!o.checked;if(Array.isArray(s)){var n=t._i(s,null);o.checked?n<0&&(t.checked=s.concat([null])):n>-1&&(t.checked=s.slice(0,n).concat(s.slice(n+1)))}else t.checked=i}},slot:"right"})]):t._e()],1),t._v(" "),s("yd-cell-group",[parseFloat(t.goods_amount)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("商品价格")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("￥"+t._s(this.GLOBAL.formatMoney(t.goods_amount,2,"")))])]):t._e(),t._v(" "),parseFloat(t.goods_pmt)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("商品优惠")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("- ￥"+t._s(this.GLOBAL.formatMoney(t.goods_pmt,2,"")))])]):t._e(),t._v(" "),parseFloat(t.order_pmt)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("订单优惠")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("- ￥"+t._s(this.GLOBAL.formatMoney(t.order_pmt,2,"")))])]):t._e(),t._v(" "),parseFloat(t.cost_freight)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("快递运费")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("+ ￥"+t._s(this.GLOBAL.formatMoney(t.cost_freight,2,"")))])]):t._e(),t._v(" "),parseFloat(t.coupon_pmt)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("优惠券")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("- ￥"+t._s(this.GLOBAL.formatMoney(t.coupon_pmt,2,"")))])]):t._e(),t._v(" "),parseFloat(t.point_pmt)?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("积分抵扣")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("- ￥"+t._s(this.GLOBAL.formatMoney(t.point_pmt,2,"")))])]):t._e(),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("订单价格")]),t._v(" "),s("span",{staticClass:"demo-list-price",attrs:{slot:"right"},slot:"right"},[t._v("￥"+t._s(this.GLOBAL.formatMoney(t.amount,2,"")))])]),t._v(" "),t.open_point&&t.usable_point?s("yd-cell-item",{attrs:{type:"checkbox"}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("积分抵扣")]),t._v(" "),s("span",{attrs:{slot:"right"},slot:"right"},[t._v("可用"+t._s(t.usable_point)+"积分 抵扣￥"+t._s(this.GLOBAL.formatMoney(t.point_money,2,""))+" ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{slot:"right",type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var s=t.checked,o=e.target,i=!!o.checked;if(Array.isArray(s)){var n=t._i(s,null);o.checked?n<0&&(t.checked=s.concat([null])):n>-1&&(t.checked=s.slice(0,n).concat(s.slice(n+1)))}else t.checked=i}},slot:"right"})]):t._e()],1)],1)},staticRenderFns:[]};var n=s("VU/8")(o,i,!1,function(t){s("AJWU")},null,null);e.a=n.exports},wAAE:function(t,e){}});
//# sourceMappingURL=4.22686a0de146a8e7ea6c.js.map